const fs = require('fs');
const path = require('path');
function walkJS(dir) {
    fs.readdirSync(dir).forEach(file => {
        let fullPath = path.join(dir, file);
        if (fs.statSync(fullPath).isDirectory()) {
            walkJS(fullPath);
        } else if (fullPath.endsWith('.js')) {
            let content = fs.readFileSync(fullPath, 'utf8');
            const targetD = "M6.94836 9.00001L6.24364 7.15783H2.00291L1.29818 9.00001H0L3.51127 0.036377H4.74764L8.25891 9.00001H6.94836ZM11.5353 9.00001H10.3236V0.036377H11.5353V9.00001ZM18.224 0.036377C20.1898 0.036377 21.2902 1.03783 21.2902 2.73165C21.2902 4.11638 20.5484 5.03129 19.1513 5.32801L21.9949 9.00001H20.4865L17.7418 5.42692H15.6647V9.00001H14.4531V0.036377H18.224ZM24.0844 9.00001V0.036377H25.6545L28.4735 5.55056L31.28 0.036377H32.8749V9.00001H31.6633V1.75492L28.7702 7.45456H28.1767L25.2713 1.75492V9.00001H24.0844ZM47.7113 0.036377C50.3324 0.036377 52.1622 1.85383 52.1622 4.51201C52.1622 7.18256 50.3324 9.00001 47.7113 9.00001H45.1149V0.036377H47.7113ZM41.8138 9.00001L41.1091 7.15783H36.8684L36.1636 9.00001H34.8655L38.3767 0.036377H39.6131L43.1244 9.00001H41.8138ZM59.5433 4.93238H55.5746V7.87492H60.3593V9.00001H54.3506V0.036377H60.2851V1.1491H55.5746V3.83201H59.5433V4.93238ZM66.1702 3.68365V0.036377H67.1716L68.0495 1.68074L68.3091 2.2371L68.5564 1.68074L69.4342 0.036377H70.448V3.68365H69.7433V1.65601L69.768 0.778195L69.3476 1.65601L68.5687 3.0531H68.0371L67.2458 1.65601L66.8378 0.82765L66.8625 1.65601V3.68365H66.1702ZM62.0778 0.691649V0.036377H65.2924V0.691649H64.056V3.68365H63.3142V0.691649H62.0778ZM18.1622 4.3142C19.0524 4.3142 20.0662 3.98038 20.0662 2.73165C20.0662 1.6931 19.448 1.1491 18.1375 1.1491H15.6647V4.3142H18.1622ZM46.3389 1.1491V7.87492H47.7113C49.64 7.87492 50.9382 6.55201 50.9382 4.51201C50.9382 2.47201 49.64 1.1491 47.7113 1.1491H46.3389ZM2.42327 6.08219H5.83564L4.12945 1.61892L2.42327 6.08219ZM37.2887 6.08219H40.7011L38.9949 1.61892L37.2887 6.08219Z";
            if (content.includes(targetD)) {
                const newPaths = [
                    "M5.01563 2.62926C4.98153 2.28551 4.83523 2.01847 4.5767 1.82812C4.31818 1.63778 3.96733 1.54261 3.52415 1.54261C3.22301 1.54261 2.96875 1.58523 2.76136 1.67045C2.55398 1.75284 2.39489 1.8679 2.28409 2.01562C2.17614 2.16335 2.12216 2.33097 2.12216 2.51847C2.11648 2.67472 2.14915 2.81108 2.22017 2.92756C2.29403 3.04403 2.39489 3.14489 2.52273 3.23011C2.65057 3.3125 2.7983 3.38494 2.96591 3.44744C3.13352 3.5071 3.3125 3.55824 3.50284 3.60085L4.28693 3.78835C4.66761 3.87358 5.01705 3.98722 5.33523 4.12926C5.65341 4.27131 5.92898 4.44602 6.16193 4.65341C6.39489 4.8608 6.57528 5.10511 6.70313 5.38636C6.83381 5.66761 6.90057 5.99006 6.90341 6.35369C6.90057 6.88778 6.7642 7.35085 6.49432 7.7429C6.22727 8.1321 5.84091 8.43466 5.33523 8.65057C4.83239 8.86364 4.22585 8.97017 3.51563 8.97017C2.81108 8.97017 2.19744 8.86222 1.67472 8.64631C1.15483 8.4304 0.74858 8.1108 0.455966 7.6875C0.166193 7.26136 0.0142046 6.73438 0 6.10653H1.78551C1.8054 6.39915 1.8892 6.64347 2.03693 6.83949C2.1875 7.03267 2.38778 7.17898 2.63778 7.27841C2.89062 7.375 3.17614 7.4233 3.49432 7.4233C3.80682 7.4233 4.07813 7.37784 4.30824 7.28693C4.54119 7.19602 4.72159 7.0696 4.84943 6.90767C4.97727 6.74574 5.04119 6.55966 5.04119 6.34943C5.04119 6.15341 4.98295 5.98864 4.86648 5.85511C4.75284 5.72159 4.58523 5.60795 4.36364 5.5142C4.14489 5.42045 3.87642 5.33523 3.55824 5.25852L2.60795 5.01989C1.87216 4.84091 1.29119 4.56108 0.865057 4.1804C0.43892 3.79972 0.227273 3.28693 0.230114 2.64205C0.227273 2.11364 0.367898 1.65199 0.651989 1.2571C0.93892 0.862216 1.33239 0.553977 1.83239 0.332386C2.33239 0.110795 2.90057 0 3.53693 0C4.18466 0 4.75 0.110795 5.23295 0.332386C5.71875 0.553977 6.09659 0.862216 6.36648 1.2571C6.63636 1.65199 6.77557 2.10938 6.78409 2.62926H5.01563Z",
                    "M9.9897 0.119318V8.84659H8.14453V0.119318H9.9897Z",
                    "M11.5078 8.84659V0.119318H14.951C15.6101 0.119318 16.1726 0.237216 16.6385 0.473011C17.1072 0.705966 17.4638 1.03693 17.7081 1.46591C17.9553 1.89205 18.0788 2.39347 18.0788 2.97017C18.0788 3.54972 17.9538 4.0483 17.7038 4.46591C17.4538 4.88068 17.0916 5.19886 16.6172 5.42045C16.1456 5.64205 15.5746 5.75284 14.9041 5.75284H12.5987V4.26989H14.6058C14.9581 4.26989 15.2507 4.22159 15.4837 4.125C15.7166 4.02841 15.8899 3.88352 16.0036 3.69034C16.12 3.49716 16.1783 3.2571 16.1783 2.97017C16.1783 2.6804 16.12 2.43608 16.0036 2.23722C15.8899 2.03835 15.7152 1.88778 15.4794 1.78551C15.2464 1.6804 14.9524 1.62784 14.5973 1.62784H13.353V8.84659H11.5078ZM16.2209 4.875L18.3899 8.84659H16.353L14.2308 4.875H16.2209Z",
                    "M19.6811 8.84659V0.119318H22.7322C23.3402 0.119318 23.8416 0.224432 24.2365 0.434659C24.6314 0.642045 24.9254 0.921875 25.1186 1.27415C25.3118 1.62358 25.4084 2.01136 25.4084 2.4375C25.4084 2.8125 25.3416 3.12216 25.2081 3.36648C25.0774 3.6108 24.9041 3.80398 24.6882 3.94602C24.4751 4.08807 24.2436 4.19318 23.9936 4.26136V4.34659C24.2607 4.36364 24.5291 4.45739 24.799 4.62784C25.0689 4.7983 25.2947 5.04261 25.4766 5.3608C25.6584 5.67898 25.7493 6.06818 25.7493 6.52841C25.7493 6.96591 25.6499 7.35938 25.451 7.70881C25.2521 8.05824 24.9382 8.33523 24.5092 8.53977C24.0803 8.74432 23.522 8.84659 22.8345 8.84659H19.6811ZM20.7379 7.90909H22.8345C23.5249 7.90909 24.0149 7.77557 24.3047 7.50852C24.5973 7.23864 24.7436 6.91193 24.7436 6.52841C24.7436 6.23295 24.6683 5.96023 24.5178 5.71023C24.3672 5.45739 24.1527 5.25568 23.8743 5.10511C23.5959 4.9517 23.2663 4.875 22.8857 4.875H20.7379V7.90909ZM20.7379 3.95455H22.6982C23.0163 3.95455 23.3033 3.89205 23.5589 3.76705C23.8175 3.64205 24.022 3.46591 24.1726 3.23864C24.326 3.01136 24.4027 2.74432 24.4027 2.4375C24.4027 2.05398 24.2692 1.72869 24.0021 1.46165C23.7351 1.19176 23.3118 1.05682 22.7322 1.05682H20.7379V3.95455Z",
                    "M27.4858 8.84659V0.119318H30.4347C31.1165 0.119318 31.6761 0.235795 32.1136 0.46875C32.5511 0.698864 32.875 1.01562 33.0852 1.41903C33.2955 1.82244 33.4006 2.28125 33.4006 2.79545C33.4006 3.30966 33.2955 3.76563 33.0852 4.16335C32.875 4.56108 32.5526 4.87358 32.1179 5.10085C31.6832 5.32528 31.1278 5.4375 30.4517 5.4375H28.0653V4.48295H30.4176C30.8835 4.48295 31.2585 4.41477 31.5426 4.27841C31.8295 4.14205 32.0369 3.94886 32.1648 3.69886C32.2955 3.44602 32.3608 3.14489 32.3608 2.79545C32.3608 2.44602 32.2955 2.14062 32.1648 1.87926C32.0341 1.6179 31.8253 1.41619 31.5384 1.27415C31.2514 1.12926 30.8722 1.05682 30.4006 1.05682H28.5426V8.84659H27.4858ZM31.5938 4.92614L33.7415 8.84659H32.5142L30.4006 4.92614H31.5938Z",
                    "M35.1616 8.84659V0.119318H40.4286V1.05682H36.2184V4.00568H40.1559V4.94318H36.2184V7.90909H40.4968V8.84659H35.1616Z",
                    "M43.9187 8.84659L41.5323 0.119318H42.6062L44.43 7.22727H44.5153L46.3732 0.119318H47.5664L49.4244 7.22727H49.5096L51.3335 0.119318H52.4073L50.021 8.84659H48.93L47.0039 1.89205H46.9357L45.0096 8.84659H43.9187Z",
                    "M57.6634 3.1875L56.5057 0.573864H56.9744L57.7841 2.49148L58.5938 0.573864H59.0625L57.9048 3.1875H57.6634ZM56.4205 3.1875V0.573864H56.875V3.1875H56.4205ZM58.6932 3.1875V0.573864H59.1477V3.1875H58.6932ZM54.7159 3.1875V0.801136H55.1705V3.1875H54.7159ZM53.9205 0.971591V0.573864H55.9659V0.971591H53.9205Z"
                ];

                const regex = /[a-zA-Z]+\([\"'\`]path[\"'\`],\s*\{[^}]*\bd:[^}]*?M6\.94836[^}]*\}\)/g;

                content = content.replace(regex, (match) => {
                    const parts = match.split(targetD);
                    if (parts.length === 2) {
                        const prefix = parts[0];
                        const suffix = parts[1];
                        return "[" + newPaths.map(d => prefix + d + suffix).join(",") + "]";
                    }
                    return match;
                });

                content = content.replace(/\"0 0 71 9\"/g, '"0 0 60 9"').replace(/width=\"71\"/g, 'width="60"');

                // There are also the cases: n.c(\"path\",{attrs:{d:targetD,fill:\"white\"}}) in another style
                // but regex above might cover n("path", ...) which misses n.c("path")
                // Let's use a simple replace that just replaces the first path creation with multiple path creations.
                console.log('Modified JS in:', fullPath);
            }

            // Re-apply a broader replacement for the compiled JS node creations
            const buildPathMatch = new RegExp(`([a-zA-Z0-9_.]+\\([\"']path[\"'],\\s*\\{[^}]*?)` + targetD.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + `([^}]*?\\})`, 'g');
            if (buildPathMatch.test(content)) {
                content = content.replace(buildPathMatch, (match, p1, p2) => {
                    return "[" + newPaths.map(d => p1 + d + p2).join(",") + "]";
                });
                console.log('Modified JS (broader) in:', fullPath);
                content = content.replace(/\"0 0 71 9\"/g, '"0 0 60 9"').replace(/width=\"71\"/g, 'width="60"');
                fs.writeFileSync(fullPath, content, 'utf8');
            }
        }
    });
}
walkJS('_nuxt');
